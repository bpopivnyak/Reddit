{% extends "base.html" %}
{% block content %}
{% load extra_tags %}

<li class="list-group-item">
    <div class="card" style="width: 80rem;">
        <div class="alert alert-light" role="alert">
            <a class="badge text-bg-primary" href="{% url 'profile' request.user.profile.pk %}">{{ post.user }}</a>
            <h1>{{ post.title }}</h1>
            <h4>{{ post.description }}</h4>
            {% if post.media %}
            <img src="{{ post.media.url }}" class="card-img-top" alt="...">
            {% endif %}
        </div>
    </div>
</li>

<div class="comments mt-4">
<h3>Comments</h3>
    {% for comment in post.comments.all %}
        <div class="comment mb-2">
             <div class="card" style="width: 40rem;">
                <div class="alert alert-light" role="alert">
                    <span class="badge text-bg-primary">{{ comment.user }}</span>
                    <p>{{ comment.content }}</p>
            {% if comment.media %}
                <div class="comment-media">
                    {% if comment.media.url|endswith:".jpg" or comment.media.url|endswith:".png" or comment.media.url|endswith:".jpeg" %}
                        <img src="{{ comment.media.url }}" alt="Зображення коментаря" style="max-width: 1000px">
                    {% endif %}
                </div>
                </div>
            {% endif %}
             </div>
        </div>
    {% empty %}
        <p>No Comments :(</p>
    {% endfor %}
</div>

<div class="add-comment mt-4">
    <form action="{% url 'post-detail' post.pk %}" method="post" enctype="multipart/form-data">
        {% csrf_token %}
        {{ comment_form.as_p }}
        <button type="submit" class="btn btn-success">Post</button>
    </form>
</div>

{% endblock %}